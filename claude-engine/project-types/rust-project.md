# CLAUDE.md - Rusté¡¹ç›®æ™ºèƒ½åä½œæŒ‡å—

## ğŸš€ **æ™ºèƒ½Claude Autopilot 2.1 å·²æ¿€æ´»**

æœ¬é¡¹ç›®å·²é›†æˆæ™ºèƒ½Claude Autopilot 2.1ç³»ç»Ÿï¼Œä¸“ä¸ºRusté¡¹ç›®ä¼˜åŒ–çš„å®Œæ•´æ™ºèƒ½å¼€å‘å·¥ä½œæµç¨‹ã€‚

### **ğŸ“Š é¡¹ç›®ä¿¡æ¯**
- **é¡¹ç›®åç§°**: $PROJECT_NAME
- **é¡¹ç›®ç±»å‹**: Rusté¡¹ç›®
- **æŠ€æœ¯æ ˆ**: $TECH_STACK  
- **CEç‰ˆæœ¬**: $SCRIPT_VERSION
- **é…ç½®æ—¶é—´**: $TIMESTAMP

### **ğŸ¯ æ™ºèƒ½å‘½ä»¤**

#### **æ ¸å¿ƒå¼€å‘æµç¨‹**
```bash
# ä¸€é”®å¼å®Œæ•´åŠŸèƒ½å¼€å‘ / Smart Feature Development
/æ™ºèƒ½åŠŸèƒ½å¼€å‘ <åŠŸèƒ½éœ€æ±‚æè¿°>
# OR /smart-feature-dev <feature description>

# æ™ºèƒ½é—®é¢˜è¯Šæ–­å’Œä¿®å¤ / Smart Bug Fix
/æ™ºèƒ½Bugä¿®å¤ <é—®é¢˜æè¿°>
# OR /smart-bugfix <problem description>

# åŸºäºæœ€ä½³å®è·µçš„æ™ºèƒ½é‡æ„ / Smart Code Refactor  
/æ™ºèƒ½ä»£ç é‡æ„ <é‡æ„ç›®æ ‡>
# OR /smart-code-refactor <refactor target>
```

#### **è¾…åŠ©å·¥å…·å‘½ä»¤**
```bash
# é‡æ–°åŠ è½½å…¨å±€ä¸Šä¸‹æ–‡å’Œç»éªŒ / Load Global Context
/åŠ è½½å…¨å±€ä¸Šä¸‹æ–‡
# OR /load-global-context

# å¼ºåˆ¶åˆ·æ–°æ¨¡å¼ï¼ˆè·å–æœ€æ–°ä¿¡æ¯ï¼‰
/åŠ è½½å…¨å±€ä¸Šä¸‹æ–‡ --force-refresh
# OR /load-global-context --force-refresh

# é¡¹ç›®å¥åº·åº¦åˆ†æ / Project Status Analysis
/é¡¹ç›®çŠ¶æ€åˆ†æ
# OR /project-status-analysis

# æ¸…ç†æ®‹ä½™æ–‡ä»¶ / Cleanup Project
/æ¸…ç†æ®‹ä½™æ–‡ä»¶
# OR /cleanup-project

# æäº¤åˆ°GitHub / Commit to GitHub
/æäº¤github
# OR /commit-github
```

### **ğŸ¦€ Rustå¼€å‘ç‰¹è‰²åŠŸèƒ½**

#### **Rustæ ¸å¿ƒç‰¹æ€§**
- **å†…å­˜å®‰å…¨**: é›¶æˆæœ¬æŠ½è±¡å’Œç¼–è¯‘æ—¶å†…å­˜å®‰å…¨ä¿è¯
- **å¹¶å‘ç¼–ç¨‹**: æ— æ•°æ®ç«äº‰çš„å®‰å…¨å¹¶å‘å’Œå¼‚æ­¥ç¼–ç¨‹
- **ç³»ç»Ÿç¼–ç¨‹**: æ¥è¿‘Cæ€§èƒ½çš„ç³»ç»Ÿçº§ç¼–ç¨‹èƒ½åŠ›
- **è·¨å¹³å°**: æ”¯æŒå¤šç§æ¶æ„å’Œæ“ä½œç³»ç»Ÿçš„åŸç”Ÿç¼–è¯‘

#### **ç°ä»£Rustç”Ÿæ€**
- **Cargoå·¥å…·é“¾**: åŒ…ç®¡ç†ã€æ„å»ºã€æµ‹è¯•ã€æ–‡æ¡£ä¸€ä½“åŒ–
- **å¼‚æ­¥ç¼–ç¨‹**: tokioã€async-stdå“åº”å¼ç¼–ç¨‹æ¡†æ¶
- **Webå¼€å‘**: actix-webã€axumã€warpé«˜æ€§èƒ½Webæ¡†æ¶
- **ç³»ç»Ÿå·¥å…·**: CLIå·¥å…·ã€ç½‘ç»œæœåŠ¡ã€åµŒå…¥å¼å¼€å‘

#### **æ€§èƒ½å’Œå®‰å…¨**
- **é›¶æˆæœ¬æŠ½è±¡**: é«˜çº§ç‰¹æ€§ä¸ç‰ºç‰²è¿è¡Œæ—¶æ€§èƒ½
- **æ‰€æœ‰æƒç³»ç»Ÿ**: ç¼–è¯‘æ—¶é˜²æ­¢å†…å­˜æ³„æ¼å’Œæ‚¬æŒ‚æŒ‡é’ˆ
- **ç±»å‹ç³»ç»Ÿ**: å¼ºå¤§çš„ç±»å‹ç³»ç»Ÿå’Œæ¨¡å¼åŒ¹é…
- **WASMæ”¯æŒ**: ç¼–è¯‘åˆ°WebAssemblyçš„ä¸€æµæ”¯æŒ

#### **æ ‡å‡†Rusté¡¹ç›®ç»“æ„æ”¯æŒ**
```
rust-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ bin/                     # äºŒè¿›åˆ¶ç›®æ ‡
â”‚   â”‚   â””â”€â”€ cli.rs               # å‘½ä»¤è¡Œå·¥å…·
â”‚   â”œâ”€â”€ lib.rs                   # åº“å…¥å£
â”‚   â”œâ”€â”€ main.rs                  # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ modules/                 # æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ config.rs            # é…ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ error.rs             # é”™è¯¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ utils.rs             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ mod.rs               # æ¨¡å—å£°æ˜
â”‚   â””â”€â”€ tests/                   # å•å…ƒæµ‹è¯•
â”œâ”€â”€ tests/                       # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ integration_test.rs      # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ common/                  # æµ‹è¯•å…¬å…±ä»£ç 
â”‚       â””â”€â”€ mod.rs
â”œâ”€â”€ examples/                    # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ basic_usage.rs           # åŸºç¡€ç”¨æ³•
â”‚   â””â”€â”€ advanced_usage.rs        # é«˜çº§ç”¨æ³•
â”œâ”€â”€ benches/                     # åŸºå‡†æµ‹è¯•
â”‚   â””â”€â”€ benchmark.rs             # æ€§èƒ½åŸºå‡†
â”œâ”€â”€ docs/                        # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/                     # è„šæœ¬æ–‡ä»¶
â”œâ”€â”€ target/                      # æ„å»ºè¾“å‡º
â”‚   â”œâ”€â”€ debug/                   # Debugæ„å»º
â”‚   â”œâ”€â”€ release/                 # Releaseæ„å»º
â”‚   â””â”€â”€ doc/                     # æ–‡æ¡£è¾“å‡º
â”œâ”€â”€ .cargo/                      # Cargoé…ç½®
â”‚   â””â”€â”€ config.toml              # æœ¬åœ°é…ç½®
â”œâ”€â”€ Cargo.toml                   # é¡¹ç›®é…ç½®
â”œâ”€â”€ Cargo.lock                   # ä¾èµ–é”å®š
â”œâ”€â”€ build.rs                     # æ„å»ºè„šæœ¬
â”œâ”€â”€ .gitignore                   # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                      # è®¸å¯è¯
â””â”€â”€ CHANGELOG.md                 # å˜æ›´æ—¥å¿—
```

#### **æ™ºèƒ½å¼€å‘å’Œæ„å»º**
```bash
# åˆ›å»ºæ–°é¡¹ç›®
cargo new my_project
cargo new my_library --lib

# æ„å»ºé¡¹ç›®
cargo build
cargo build --release

# è¿è¡Œé¡¹ç›®
cargo run
cargo run --bin cli_tool

# è¿è¡Œæµ‹è¯•
cargo test
cargo test --lib
cargo test --integration-test integration_test

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench

# æ£€æŸ¥ä»£ç 
cargo check
cargo clippy

# æ ¼å¼åŒ–ä»£ç 
cargo fmt

# ç”Ÿæˆæ–‡æ¡£
cargo doc
cargo doc --open

# å‘å¸ƒåŒ…
cargo publish

# æ›´æ–°ä¾èµ–
cargo update

# å®‰è£…å·¥å…·
cargo install cargo-watch
cargo install cargo-expand
```

### **ğŸ§  æ™ºèƒ½èƒ½åŠ›**

#### **MCPå·¥å…·é“¾é›†æˆ**
- **sequential-thinking**: Rustç³»ç»Ÿæ¶æ„è®¾è®¡å’Œå¹¶å‘æ¨¡å¼åˆ†æ
- **context7**: åŠ¨æ€è·å–Rustç”Ÿæ€æœ€æ–°æ–‡æ¡£å’Œæœ€ä½³å®è·µ
- **memory**: Rustå¼€å‘ç»éªŒè‡ªåŠ¨å¤ç”¨å’Œæ‰€æœ‰æƒæ¨¡å¼åº“
- **puppeteer**: Rust Webåº”ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•å’Œæ€§èƒ½ç›‘æ§

#### **å…¨å±€è§„åˆ™éµå®ˆ**
- **Rustä»£ç è§„èŒƒ**: è‡ªåŠ¨åº”ç”¨Rustå®˜æ–¹é£æ ¼æŒ‡å—å’Œæœ€ä½³å®è·µ
- **æ‰€æœ‰æƒç³»ç»Ÿ**: å†…å­˜å®‰å…¨å’Œå€Ÿç”¨æ£€æŸ¥å™¨çš„æ­£ç¡®ä½¿ç”¨
- **é”™è¯¯å¤„ç†**: Resultå’ŒOptionç±»å‹çš„ä¹ æƒ¯ç”¨æ³•
- **å¹¶å‘å®‰å…¨**: Sendå’ŒSync traitçš„æ­£ç¡®ç†è§£å’Œåº”ç”¨

#### **Rustä¸“é¡¹æ™ºèƒ½ç‰¹æ€§**
- **æ‰€æœ‰æƒæ¨¡å¼**: å€Ÿç”¨ã€ç”Ÿå‘½å‘¨æœŸã€æ™ºèƒ½æŒ‡é’ˆçš„æœ€ä½³å®è·µ
- **é”™è¯¯å¤„ç†**: ? æ“ä½œç¬¦ã€è‡ªå®šä¹‰é”™è¯¯ç±»å‹ã€é”™è¯¯ä¼ æ’­
- **å¼‚æ­¥ç¼–ç¨‹**: async/awaitã€Futureã€Streamçš„æ­£ç¡®ä½¿ç”¨
- **æ€§èƒ½ä¼˜åŒ–**: é›¶åˆ†é…ç®—æ³•ã€SIMDã€å†…å­˜å¸ƒå±€ä¼˜åŒ–

### **ğŸ“‹ Rustå¼€å‘å»ºè®®**

#### **å¼€å§‹å¼€å‘**
1. æè¿°é¡¹ç›®éœ€æ±‚ï¼Œå¦‚ï¼š"åˆ›å»ºé«˜æ€§èƒ½Web APIæœåŠ¡"
2. ç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ¡†æ¶å’Œæ¶æ„æ¨¡å¼
3. ç”Ÿæˆç¬¦åˆRustæœ€ä½³å®è·µçš„é¡¹ç›®ç»“æ„

#### **ç³»ç»Ÿç¼–ç¨‹**
1. è¯´æ˜ç³»ç»Ÿéœ€æ±‚ï¼Œå¦‚ï¼š"å®ç°å¹¶å‘æ–‡ä»¶å¤„ç†å·¥å…·"
2. ç³»ç»Ÿä¼šè®¾è®¡å®‰å…¨çš„å¹¶å‘æ¨¡å¼å’Œé”™è¯¯å¤„ç†
3. ç¡®ä¿å†…å­˜å®‰å…¨å’Œæœ€ä½³æ€§èƒ½

#### **Webå¼€å‘**
1. æè¿°Webåº”ç”¨éœ€æ±‚ï¼Œå¦‚ï¼š"åˆ›å»ºRESTful APIæœåŠ¡"
2. ç³»ç»Ÿä¼šé€‰æ‹©åˆé€‚çš„å¼‚æ­¥Webæ¡†æ¶
3. å®ç°é«˜æ€§èƒ½çš„è¯·æ±‚å¤„ç†å’Œæ•°æ®åºåˆ—åŒ–

### **ğŸ”§ å¼€å‘å·¥å…·é›†æˆ**

#### **å¼€å‘ç¯å¢ƒ**
- **Rust 1.70+**: ç¨³å®šç‰ˆRustå·¥å…·é“¾
- **Cargo**: å®˜æ–¹åŒ…ç®¡ç†å’Œæ„å»ºå·¥å…·
- **rustup**: Rustå·¥å…·é“¾ç‰ˆæœ¬ç®¡ç†
- **IDEæ”¯æŒ**: VSCodeã€IntelliJ IDEAã€Vim/Neovim

#### **ä»£ç è´¨é‡**
- **clippy**: Rustå®˜æ–¹ä»£ç æ£€æŸ¥å·¥å…·
- **rustfmt**: è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–
- **cargo-audit**: å®‰å…¨æ¼æ´æ‰«æ
- **cargo-deny**: ä¾èµ–å’Œè®¸å¯è¯æ£€æŸ¥

#### **æµ‹è¯•æ¡†æ¶**
- **å†…ç½®æµ‹è¯•**: Rustæ ‡å‡†åº“æµ‹è¯•æ”¯æŒ
- **proptest**: å±æ€§åŸºç¡€æµ‹è¯•
- **criterion**: å¾®åŸºå‡†æµ‹è¯•æ¡†æ¶
- **mockall**: Mockå¯¹è±¡ç”Ÿæˆ

#### **å¼€å‘å·¥å…·**
- **cargo-watch**: æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡æ–°æ„å»º
- **cargo-expand**: å®å±•å¼€æŸ¥çœ‹
- **cargo-tree**: ä¾èµ–æ ‘å¯è§†åŒ–
- **cargo-udeps**: æœªä½¿ç”¨ä¾èµ–æ£€æµ‹

### **ğŸ“ˆ æ•ˆç‡æå‡**

ç›¸æ¯”ä¼ ç»Ÿç³»ç»Ÿç¼–ç¨‹ï¼Œæ™ºèƒ½Claude Autopilot 2.1æä¾›ï¼š
- âš¡ **å¼€å‘æ•ˆç‡**: Rusté¡¹ç›®ç»“æ„å’Œå¸¸ç”¨æ¨¡å¼è‡ªåŠ¨ç”Ÿæˆï¼Œæå‡3-4å€æ•ˆç‡
- ğŸ¯ **å®‰å…¨è´¨é‡**: ç¼–è¯‘æ—¶å†…å­˜å®‰å…¨ä¿è¯å’Œå¹¶å‘å®‰å…¨æ£€æŸ¥
- ğŸ”„ **æ¨¡å¼å¤ç”¨**: æ™ºèƒ½çš„æ‰€æœ‰æƒæ¨¡å¼å’Œé”™è¯¯å¤„ç†ç­–ç•¥
- ğŸ“Š **æ€§èƒ½ä¼˜åŒ–**: é›¶æˆæœ¬æŠ½è±¡å’Œç¼–è¯‘å™¨ä¼˜åŒ–æŒ‡å¯¼
- ğŸ§ª **æµ‹è¯•è¦†ç›–**: è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’ŒåŸºå‡†æµ‹è¯•

### **ğŸ†˜ æ•…éšœæ’é™¤**

#### **å‘½ä»¤ä¸å¯ç”¨**
```bash
# é‡æ–°åŠ è½½å…¨å±€ä¸Šä¸‹æ–‡ / Reload Global Context
/åŠ è½½å…¨å±€ä¸Šä¸‹æ–‡ --force-refresh
# OR /load-global-context --force-refresh
```

#### **Rustå·¥å…·é“¾é—®é¢˜**
```bash
# æ£€æŸ¥Rustç‰ˆæœ¬
rustc --version
cargo --version

# æ›´æ–°Rustå·¥å…·é“¾
rustup update

# æ£€æŸ¥å·²å®‰è£…å·¥å…·é“¾
rustup show

# è®¾ç½®é»˜è®¤å·¥å…·é“¾
rustup default stable

# å®‰è£…ç‰¹å®šå·¥å…·é“¾
rustup install nightly
rustup default nightly

# æ£€æŸ¥ç»„ä»¶
rustup component list
```

#### **ç¼–è¯‘é—®é¢˜**
```bash
# æ¸…ç†æ„å»ºç¼“å­˜
cargo clean

# è¯¦ç»†ç¼–è¯‘è¾“å‡º
cargo build --verbose

# æ£€æŸ¥ä»£ç ä¸ç¼–è¯‘
cargo check

# æ˜¾ç¤ºç¼–è¯‘å™¨ç‰ˆæœ¬
rustc --version --verbose

# è§£é‡Šç¼–è¯‘é”™è¯¯
rustc --explain E0308

# ä½¿ç”¨ä¸åŒç‰ˆæœ¬ç¼–è¯‘
cargo +nightly build
```

#### **ä¾èµ–é—®é¢˜**
```bash
# æŸ¥çœ‹ä¾èµ–æ ‘
cargo tree

# æ›´æ–°ä¾èµ–
cargo update

# æ·»åŠ ä¾èµ–
cargo add tokio

# ç§»é™¤ä¾èµ–
cargo remove tokio

# æ£€æŸ¥è¿‡æ—¶ä¾èµ–
cargo outdated

# å®¡è®¡å®‰å…¨æ¼æ´
cargo audit

# æ£€æŸ¥æœªä½¿ç”¨ä¾èµ–
cargo udeps
```

#### **æµ‹è¯•é—®é¢˜**
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œç‰¹å®šæµ‹è¯•
cargo test test_name

# æ˜¾ç¤ºæµ‹è¯•è¾“å‡º
cargo test -- --nocapture

# è¿è¡Œå¿½ç•¥çš„æµ‹è¯•
cargo test -- --ignored

# å•çº¿ç¨‹è¿è¡Œæµ‹è¯•
cargo test -- --test-threads=1

# è¿è¡Œæ–‡æ¡£æµ‹è¯•
cargo test --doc

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡
cargo tarpaulin
```

#### **æ€§èƒ½é—®é¢˜**
```bash
# Releaseæ¨¡å¼æ„å»º
cargo build --release

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cargo bench

# æ€§èƒ½åˆ†æ
perf record cargo run --release
perf report

# å†…å­˜åˆ†æ
valgrind --tool=memcheck cargo run

# ä»£ç å¤§å°åˆ†æ
cargo bloat --release

# ç¼–è¯‘æ—¶é—´åˆ†æ
cargo build -Z timings
```

#### **å¼‚æ­¥ç¼–ç¨‹é—®é¢˜**
```bash
# æ£€æŸ¥asyncä¾èµ–
grep -r "async" Cargo.toml

# Tokioè¿è¡Œæ—¶è°ƒè¯•
RUST_LOG=tokio=debug cargo run

# å¼‚æ­¥æ ˆè·Ÿè¸ª
cargo install tokio-console
RUSTFLAGS="--cfg tokio_unstable" cargo run

# æ­»é”æ£€æµ‹
cargo install parking_lot
# ä½¿ç”¨parking_lot::Mutexæ›¿ä»£std::sync::Mutex
```

---

## ğŸš€ **å¼€å§‹Rustæ™ºèƒ½å¼€å‘ä¹‹æ—…**

æ™ºèƒ½Claude Autopilot 2.1ä¸“ä¸ºRustå¼€å‘ä¼˜åŒ–ï¼

**ç›´æ¥æè¿°æ‚¨çš„Rusté¡¹ç›®éœ€æ±‚**ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é€‰æ‹©æœ€é€‚åˆçš„å¼€å‘æ¨¡å¼ï¼š

- ç³»ç»Ÿå·¥å…· â†’ é«˜æ€§èƒ½CLIå·¥å…·å’Œç³»ç»ŸæœåŠ¡
- WebæœåŠ¡ â†’ å¼‚æ­¥Web APIå’Œå¾®æœåŠ¡æ¶æ„
- ç½‘ç»œç¼–ç¨‹ â†’ é«˜å¹¶å‘ç½‘ç»œæœåŠ¡å’Œåè®®å®ç°
- åµŒå…¥å¼å¼€å‘ â†’ no_stdç¯å¢ƒå’Œå®æ—¶ç³»ç»Ÿ

**äº«å—Rustçš„å†…å­˜å®‰å…¨å’Œæè‡´æ€§èƒ½ï¼** âœ¨

---

**Claude Autopilotè·¯å¾„**: $GLOBAL_CE_PATH  
**é¡¹ç›®é…ç½®**: .claude/project.json  
**æœ€ååŒæ­¥**: $TIMESTAMP  
**CEç‰ˆæœ¬**: v$SCRIPT_VERSION

*æœ¬æ–‡ä»¶ç”±Claude Autopilotæ³¨å…¥è„šæœ¬è‡ªåŠ¨ç”Ÿæˆï¼Œä¸“ä¸ºRusté¡¹ç›®ä¼˜åŒ–*